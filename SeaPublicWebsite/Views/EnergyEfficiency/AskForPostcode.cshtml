@using GovUkDesignSystem
@using GovUkDesignSystem.GovUkDesignSystemComponents
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using SeaPublicWebsite.Controllers

@model SeaPublicWebsite.Models.EnergyEfficiency.AskForPostcodeViewModel
@{
    ViewBag.Title = "Enter your address";
}

@section BeforeMain {
    @await Html.GovUkBackLink(new BackLinkViewModel
    {
        Text = "Back",
        Href = Model.BackLink,
        
        // Note: some of the "Back" links in this journey can't use the default browser behaviour
        //  so we should control all of them explicitly
        OverrideWithJavascript = false
    })
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        
        <form action="@Url.Action(nameof(EnergyEfficiencyController.AskForPostcode_Post), "EnergyEfficiency", new {reference = Model.Reference})" method="post">
            @Html.AntiForgeryToken()
            <text>
                <p class="govuk-caption-l">
                Find your EPC
                </p>
            </text>
            
            
            @{
                Func<object, object> details =
                    @<text>
                        <p class="govuk-body">
                            Content TBD
                        </p>
                     </text>;
            }
            
            @await Html.GovUkFieldset(new FieldsetViewModel
            {
                Legend = new LegendViewModel
                {
                    Text = "What is the address of your property?",
                    Classes = "govuk-fieldset__legend--l",
                    IsPageHeading = true
                },
                InnerHtml = 
                    @<text>
                        @await Html.GovUkDetails(new DetailsViewModel
                        {
                            SummaryText = "What we do with your address", 
                            Html = details
                        })
                        
                        @(await Html.GovUkTextInputFor(
                            m => m.HouseNameOrNumber, 
                            labelOptions: new LabelViewModel
                            {
                                Text = "Building number or name",
                            },
                            classes: "govuk-input--width-10",
                            formGroupOptions: new FormGroupViewModel
                            {
                                Classes = "govuk-!-margin-bottom-2"
                            },
                            placeholder: "e.g. 19 or Buckingham Palace"
                            ))

                        @(await Html.GovUkTextInputFor(
                            m => m.Postcode,
                            labelOptions: new LabelViewModel
                            {
                                Text = "Postcode",
                            },
                            classes: "govuk-input--width-10",
                            placeholder: "AB12 3CD"
                            ))
                     </text>
            })
            
            <div class="govuk-button-group">
                @(await Html.GovUkButton(new ButtonViewModel
                {
                    Text = "Continue",
                }))
                <a href="@Model.SkipLink"
                   class="govuk-link">
                    Cancel and continue without an EPC
                </a>
            </div>
            
        </form>
        
    </div>
</div>
