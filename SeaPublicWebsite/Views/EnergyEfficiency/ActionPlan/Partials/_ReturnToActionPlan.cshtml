@using SeaPublicWebsite.Models.EnergyEfficiency
@using GovUkDesignSystem
@using GovUkDesignSystem.GovUkDesignSystemComponents
@using GovUkDesignSystem.GovUkDesignSystemComponents.Enums
@model SeaPublicWebsite.Models.EnergyEfficiency.ActionPlanViewModel;

<h2 class="govuk-heading-m">
    Returning to your Action Plan
</h2>

<div class="sea-user-reference govuk-!-margin-bottom-6" role="complementary">
    <h2 class="govuk-body-l govuk-!-margin-0">Your reference code</h2>
    <span class="govuk-heading-l" id="subsection-title">@Model.PropertyData.Reference</span>
</div>

<p class="govuk-body">
    You can come back to this action plan using your reference number or we can send a link to your email.
</p>

@if (Model.EmailAddress is not null)
{
    <p class="govuk-body sea-email-sent">
        Email sent to @Model.EmailAddress
    </p>
}

@{ await Html.RenderPartialAsync("_SendEmail.cshtml", new YourSavedRecommendationsEmailViewModel()); }

<h2 class="govuk-heading-m">
    Change your answers
</h2>
<p class="govuk-body">
    We have provided recommendations that are most suitable for your home based on the answers you provided earlier.
</p>
<p class="govuk-body">
    If something doesn’t look right you can 
    <a href="@Url.Action("AnswerSummary_Get", "EnergyEfficiency", new { reference = Model.PropertyData.Reference })">
        view and change your answers here.
    </a> 
</p>

@await Html.GovUkNotificationBanner(new NotificationBannerViewModel
{
    TitleText = "Give feedback",
    TitleHeadingLevel = HeadingLevel.h2,
    Html = @<text>
               <p class="govuk-body">
                   <strong>
                       This service is still in development. Your feedback will help us understand
                       how well the service is working and what can be improved.
                   </strong>
               </p>
               <a class="govuk-link" href="@Constants.FEEDBACK_URL_ACTION_PLAN" target="_blank">
                   <strong>
                       Leave your feedback (opens in new tab)
                   </strong>
               </a>
            </text>
})